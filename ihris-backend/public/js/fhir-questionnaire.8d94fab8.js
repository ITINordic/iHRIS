(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-questionnaire"],{"0bc6":function(t,e,a){},4983:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.id}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[a("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(t._s(t.label))]),a("v-card-text",{staticClass:"my-3"},[t._t("default")],2)],1)],1)},r=[],n={name:"ihris-questionnaire-section",props:["id","label","description","path"],data:function(){return{isQuestionnaireGroup:!0}}},s=n,o=a("2877"),c=a("6544"),l=a.n(c),u=a("b0af"),d=a("99d9"),p=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=p.exports;l()(p,{VCard:u["a"],VCardText:d["c"],VCardTitle:d["d"]})},5105:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-none"},[a("v-text-field",{attrs:{readonly:"","hide-details":"",dense:"",disabled:""},model:{value:t.hiddenValue,callback:function(e){t.hiddenValue=e},expression:"hiddenValue"}})],1)},r=[],n={name:"ihris-hidden",props:["label","path","hiddenType","hiddenValue"],data:function(){return{qField:"value"+this.hiddenType,value:this.hiddenValue}}},s=n,o=a("2877"),c=a("6544"),l=a.n(c),u=a("8654"),d=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=d.exports;l()(d,{VTextField:u["a"]})},"91dd":function(t,e,a){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,a,n){e=e||"&",a=a||"=";var s={};if("string"!==typeof t||0===t.length)return s;var o=/\+/g;t=t.split(e);var c=1e3;n&&"number"===typeof n.maxKeys&&(c=n.maxKeys);var l=t.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,p,v,h,f=t[u].replace(o,"%20"),m=f.indexOf(a);m>=0?(d=f.substr(0,m),p=f.substr(m+1)):(d=f,p=""),v=decodeURIComponent(d),h=decodeURIComponent(p),i(s,v)?r(s[v])?s[v].push(h):s[v]=[s[v],h]:s[v]=h}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},b383:function(t,e,a){"use strict";e.decode=e.parse=a("91dd"),e.encode=e.stringify=a("e099")},e099:function(t,e,a){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,a,o){return e=e||"&",a=a||"=",null===t&&(t=void 0),"object"===typeof t?n(s(t),(function(s){var o=encodeURIComponent(i(s))+a;return r(t[s])?n(t[s],(function(t){return o+encodeURIComponent(i(t))})).join(e):o+encodeURIComponent(i(t[s]))})).join(e):o?encodeURIComponent(i(o))+a+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function n(t,e){if(t.map)return t.map(e);for(var a=[],i=0;i<t.length;i++)a.push(e(t[i],i));return a}var s=Object.keys||function(t){var e=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.push(a);return e}},e0c7:function(t,e,a){"use strict";var i=a("5530"),r=(a("0bc6"),a("7560")),n=a("58df");e["a"]=Object(n["a"])(r["a"]).extend({name:"v-subheader",props:{inset:Boolean},render:function(t){return t("div",{staticClass:"v-subheader",class:Object(i["a"])({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},f43a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[a("v-card-title",{staticClass:"primary white--text text-uppercase font-weight-bold"},[t._v(t._s(t.label))]),a("v-card-text",{staticClass:"my-3"},[t._t("default")],2)],1)},r=[],n={name:"ihris-questionnaire-group",props:["label","path"],data:function(){return{isQuestionnaireGroup:!0}}},s=n,o=a("2877"),c=a("6544"),l=a.n(c),u=a("b0af"),d=a("99d9"),p=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=p.exports;l()(p,{VCard:u["a"],VCardText:d["c"],VCardTitle:d["d"]})},f977:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"my-3"},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default"),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}}),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.overlay=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",right:"",permanent:"",clipped:""}},[a("v-list",{staticClass:"white--text"},[a("v-list-item",[t.isEdit?a("v-btn",{staticClass:"accent darken-1",attrs:{dark:""},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),a("span",[t._v("Back")])],1):t._e(),a("v-spacer"),a("v-btn",{staticClass:"success darken-1",attrs:{dark:"",disabled:!t.valid},on:{click:function(e){return t.processFHIR()}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),a("span",[t._v("Save")])],1)],1),a("v-list-item",[a("v-spacer"),t.edit?a("v-btn",{staticClass:"accent",attrs:{dark:""},on:{click:function(e){return t.$refs.form.validate()}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-account-check")]),a("span",[t._v("Validate")])],1):t._e()],1),a("v-divider",{attrs:{color:"white"}}),t.sectionMenu?a("v-subheader",{staticClass:"white--text"},[a("h2",[t._v("Sections")])]):t._e(),t._l(t.sectionMenu,(function(e){return a("v-list-item",{key:e.id,attrs:{href:"#section-"+e.id}},[a("v-list-item-content",{staticClass:"white--text"},[a("v-list-item-title",{staticClass:"text-uppercase"},[a("h4",[t._v(t._s(e.title))])]),a("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(e.desc))])],1)],1)}))],2)],1)],2)],1)},r=[],n=(a("4160"),a("d3b7"),a("ac1f"),a("1276"),a("159b"),a("b383")),s={name:"ihris-questionnaire",props:["id","url","title","description","purpose","section-menu","view-page","edit"],data:function(){return{fhir:{},loading:!1,overlay:!1,isEdit:!1,valid:!0}},created:function(){},methods:{processFHIR:function(){var t=this;this.$refs.form.validate(),this.valid&&(this.overlay=!0,this.loading=!0,this.fhir={resourceType:"QuestionnaireResponse",questionnaire:this.url,status:"completed",item:[]},o(this.fhir.item,this.$children),console.log("SAVE",this.fhir),fetch("/fhir/QuestionnaireResponse?"+n.stringify(this.$route.query),{method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual",body:JSON.stringify(this.fhir)}).then((function(e){201===e.status&&(e.json().then((function(e){if(t.overlay=!1,t.loading=!1,t.viewPage&&e.subject&&e.subject.reference){var a=e.subject.reference.split("/");a=a[1]?a[1]:e.subject.reference,t.$router.push({name:"resource_view",params:{page:t.viewPage,id:a}})}else t.$router.push({name:"home"})})),t.$store.commit("setMessage",{type:"success",text:"Update successful."}))})).catch((function(e){console.log(e),t.overlay=!1,t.loading=!1,t.$store.commit("setMessage",{type:"error",text:"Failed to update data."})})))}}},o=function t(e,a,i){i||(i={}),a.forEach((function(a){var r=e,n={};if(a.isArray);else if(a.isQuestionnaireGroup){var s={linkId:a.path,text:a.label,item:[]};r.push(s),r=s.item}else if(a.qField){var o;i.hasOwnProperty(a.path)?o=i[a.path]:(o={linkId:a.path,answer:[]},i[a.path]=o,r.push(o));var c={};c[a.qField]=a.value,o.answer.push(c)}a.$children&&t(r,a.$children,n)}))},c=s,l=a("2877"),u=a("6544"),d=a.n(u),p=a("8336"),v=a("a523"),h=a("ce7e"),f=a("4bd4"),m=a("132d"),b=a("8860"),y=a("da13"),C=a("5d23"),x=a("f774"),g=a("a797"),_=a("490a"),w=a("2fa4"),V=a("e0c7"),j=Object(l["a"])(c,i,r,!1,null,null,null);e["default"]=j.exports;d()(j,{VBtn:p["a"],VContainer:v["a"],VDivider:h["a"],VForm:f["a"],VIcon:m["a"],VList:b["a"],VListItem:y["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VNavigationDrawer:x["a"],VOverlay:g["a"],VProgressCircular:_["a"],VSpacer:w["a"],VSubheader:V["a"]})}}]);
//# sourceMappingURL=fhir-questionnaire.8d94fab8.js.map