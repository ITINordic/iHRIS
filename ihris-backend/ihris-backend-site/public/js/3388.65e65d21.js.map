{"version":3,"file":"js/3388.65e65d21.js","mappings":"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","sources":["webpack://iHRIS-v5/./src/site/components/nmcb/nmcb-registration.vue?88f5","webpack://iHRIS-v5/src/site/components/nmcb/nmcb-registration.vue","webpack://iHRIS-v5/./src/site/components/nmcb/nmcb-registration.vue?0656","webpack://iHRIS-v5/./src/site/components/nmcb/nmcb-registration.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"grid-list-xs\":\"\"}},[_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"size\":\"50\"}}),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.overlay = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-navigation-drawer',{staticClass:\"primary darken-1 white--text\",staticStyle:{\"z-index\":\"3\"},attrs:{\"app\":\"\",\"clipped\":\"\",\"permanent\":\"\",\"right\":\"\"}},[_c('v-list',{staticClass:\"white--text\"},[_c('v-list-item',[_c('v-btn',{staticClass:\"secondary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/resource/view/bwpractitioner/' + _vm.queries.practitioner)}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-eye\")]),_c('span',[_vm._v(\"View Health Profession\")])],1)],1),_c('v-divider',{attrs:{\"color\":\"white\"}}),(_vm.canRenewLicense)?_c('v-list-item',[_c('v-btn',{staticClass:\"primary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){_vm.renewDialog = true}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-autorenew\")]),_c('span',[_vm._v(\"Renew License\")])],1)],1):_vm._e(),(_vm.canPrintCertificate)?_c('v-list-item',[_c('v-btn',{staticClass:\"blue\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.print_certificate('initial_certificate')}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-download\")]),_c('span',[_vm._v(\"Intial Certificate\")])],1)],1):_vm._e(),(_vm.canPrintCertificate)?_c('v-list-item',[_c('v-btn',{staticClass:\"blue\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.print_certificate('practising_certificate')}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-download\")]),_c('span',[_vm._v(\"Practising Certificate\")])],1)],1):_vm._e(),(_vm.canPrintCertificate)?_c('v-list-item',[_c('v-btn',{staticClass:\"blue\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.print_certificate('provisional_certificate')}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-download\")]),_c('span',[_vm._v(\"Provisional Certificate\")])],1)],1):_vm._e()],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"500px\",\"transition\":\"dialog-transition\"},model:{value:(_vm.renewDialog),callback:function ($$v) {_vm.renewDialog=$$v},expression:\"renewDialog\"}},[_c('v-card',[_c('v-toolbar',{staticClass:\"darken-1 white--text text-uppercase font-weight-bold\",attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_vm._v(\" License Renewal \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":function($event){_vm.renewDialog = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',[_c('v-menu',{attrs:{\"close-on-content-click\":false,\"nudge-right\":40,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"290px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({attrs:{\"label\":\"Renewal Date*\",\"prepend-icon\":\"mdi-event\",\"readonly\":\"\"},model:{value:(_vm.renewalDateFormatted),callback:function ($$v) {_vm.renewalDateFormatted=$$v},expression:\"renewalDateFormatted\"}},on))]}}]),model:{value:(_vm.dateMenu),callback:function ($$v) {_vm.dateMenu=$$v},expression:\"dateMenu\"}},[_c('v-date-picker',{on:{\"change\":function($event){_vm.renewalDateFormatted = _vm.formatDate(_vm.renewalDate)},\"input\":function($event){_vm.dateMenu = false}},model:{value:(_vm.renewalDate),callback:function ($$v) {_vm.renewalDate=$$v},expression:\"renewalDate\"}})],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"success\",\"disabled\":!_vm.renewalDate},on:{\"click\":_vm.renew}},[_vm._v(\"Renew\")])],1)],1)],1),_c('bw-page-view',{key:_vm.regCompKey,attrs:{\"id\":_vm.queries.id,\"page\":\"nmcb-registration\"}}),(_vm.license.resource.id)?_c('bw-page-view',{key:_vm.licenseCompKey,attrs:{\"id\":_vm.license.resource.id,\"page\":\"nmcb-license\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container grid-list-xs>\n    <v-overlay :value=\"overlay\">\n      <v-progress-circular\n          color=\"primary\"\n          indeterminate\n          size=\"50\"\n      ></v-progress-circular>\n      <v-btn icon @click=\"overlay = false\">\n        <v-icon>mdi-close</v-icon>\n      </v-btn>\n    </v-overlay>\n    <v-navigation-drawer\n      app\n      class=\"primary darken-1 white--text\"\n      clipped\n      permanent\n      right\n      style=\"z-index: 3;\"\n    >\n      <v-list class=\"white--text\">\n        <v-list-item>\n          <v-btn class=\"secondary\" dark @click=\"$router.push('/resource/view/bwpractitioner/' + queries.practitioner)\">\n            <v-icon light left>mdi-eye</v-icon>\n            <span>View Health Profession</span>\n          </v-btn>\n        </v-list-item>\n        <v-divider color=\"white\"></v-divider>          \n        <v-list-item v-if=\"canRenewLicense\">\n          <v-btn\n            @click=\"renewDialog = true\"\n            class=\"primary\"\n            dark\n          >\n            <v-icon light left>mdi-autorenew</v-icon>\n            <span>Renew License</span>\n          </v-btn>\n        </v-list-item>\n        <v-list-item v-if=\"canPrintCertificate\">\n          <v-btn\n            @click=\"print_certificate('initial_certificate')\"\n            class=\"blue\"\n            dark\n          >\n            <v-icon light left>mdi-download</v-icon>\n            <span>Intial Certificate</span>\n          </v-btn>\n        </v-list-item>\n        <v-list-item v-if=\"canPrintCertificate\">\n          <v-btn\n            @click=\"print_certificate('practising_certificate')\"\n            class=\"blue\"\n            dark\n          >\n            <v-icon light left>mdi-download</v-icon>\n            <span>Practising Certificate</span>\n          </v-btn>\n        </v-list-item>\n        <v-list-item v-if=\"canPrintCertificate\">\n          <v-btn\n            @click=\"print_certificate('provisional_certificate')\"\n            class=\"blue\"\n            dark\n          >\n            <v-icon light left>mdi-download</v-icon>\n            <span>Provisional Certificate</span>\n          </v-btn>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n    <v-dialog\n      v-model=\"renewDialog\"\n      persistent\n      max-width=\"500px\"\n      transition=\"dialog-transition\"\n    >\n      <v-card>\n        <v-toolbar color=\"primary\" class=\"darken-1 white--text text-uppercase font-weight-bold\" dark>\n          License Renewal\n          <v-spacer></v-spacer>\n          <v-btn icon color=\"white\" @click=\"renewDialog = false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <v-card-text>\n          <v-menu\n            v-model=\"dateMenu\"\n            :close-on-content-click=\"false\"\n            :nudge-right=\"40\"\n            transition=\"scale-transition\"\n            offset-y\n            min-width=\"290px\"\n          >\n            <template v-slot:activator=\"{ on }\">\n              <v-text-field\n                v-model=\"renewalDateFormatted\"\n                label=\"Renewal Date*\"\n                prepend-icon=\"mdi-event\"\n                readonly\n                v-on=\"on\"\n              />\n            </template>\n            <v-date-picker\n              v-model=\"renewalDate\"\n              @change=\"renewalDateFormatted = formatDate(renewalDate)\"\n              @input=\"dateMenu = false\"\n            />\n          </v-menu>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"success\" :disabled=\"!renewalDate\" @click=\"renew\">Renew</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <bw-page-view :id=\"queries.id\" page=\"nmcb-registration\" :key=\"regCompKey\" />\n    <bw-page-view :id=\"license.resource.id\" page=\"nmcb-license\" v-if=\"license.resource.id\" :key=\"licenseCompKey\" />\n  </v-container>\n</template>\n<script>\nexport default {\n  props: [\"queries\"],\n  data() {\n    return {\n      overlay: false,\n      loading: false,\n      renewDialog: false,\n      renewalDate: '',\n      dateMenu: false,\n      renewalDateFormatted: '',\n      regStatusCodes: [],\n      regCompKey: 'registration'+0,\n      licenseCompKey: 'license'+0,\n      registration: {\n        resource: {},\n        statusCode: '',\n        registrationStatus: {}\n      },\n      license: {\n        resource: {},\n      }\n    }\n  },\n  computed: {\n    canRenewLicense() {\n      if(\n        this.$store.state.user.role === 'nmcb-role-records-officer' &&\n        this.registration.statusCode && (this.registration.statusCode == 'active' || this.registration.statusCode == 'lapsed')\n      ) {\n        return true\n      }\n      return false\n    },\n    canPrintCertificate() {\n      if(\n        this.$store.state.user.role === 'nmcb-role-records-officer' &&\n        this.registration.statusCode && this.registration.statusCode == 'active'\n      ) {\n        return true\n      }\n      return false\n    }\n  },\n  methods: {\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}-${month}-${year}`;\n    },\n    print_certificate(type) {\n      this.overlay = true\n      fetch(\"/site/nmcb/\" + type + \"/\" + this.queries.practitioner).then((response) =>{\n        response.blob().then((blob) => {\n          fetch(\"/fhir/Practitioner/\" + this.queries.practitioner).then((response) => {\n            response.json().then((pract) => {\n              this.overlay = false\n              let fullname = \"\"\n              let name = pract.name.find((nm) => {\n                nm.use === \"official\"\n              })\n              if(!name && pract.name && pract.name.length > 0) {\n                name = pract.name[0]\n              }\n              if(name) {\n                let prefix = name.extension && name.extension.find((ext) => {\n                  return ext.url === \"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-prefix\"\n                })\n                if(prefix) {\n                  fullname += prefix.valueCoding.display\n                }\n                if(name.given) {\n                  if(fullname) {\n                    fullname += \" \"\n                  }\n                  fullname += name.given.join(\" \")\n                }\n                if(name.family) {\n                  if(fullname) {\n                    fullname += \" \"\n                  }\n                  fullname += name.family\n                }\n              }\n              let link = document.createElement(\"a\");\n              link.href = window.URL.createObjectURL(blob);\n              link.download = `${fullname}.pdf`;\n              link.click();\n            }).catch(() => {\n              this.overlay = false\n            })\n          }).catch(() => {\n              this.overlay = false\n            })\n        }).catch(() => {\n          this.overlay = false\n        })\n      }).catch(() => {\n        this.overlay = false\n      })\n    },\n    renew() {\n      this.overlay = true;\n      this.renewDialog = false\n      let practitioner = this.license.resource.extension.find((ext) => {\n        return ext.url === 'http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference'\n      }).valueReference.reference\n      let registration = this.license.resource.extension.find((ext) => {\n        return ext.url === 'http://ihris.org/fhir/StructureDefinition/nmcb-registration-reference'\n      }).valueReference.reference\n      let licensenumber = this.license.resource.extension.find((ext) => {\n        return ext.url === 'http://ihris.org/fhir/StructureDefinition/license-number'\n      }).valueString\n      let endDate\n      if(this.renewalDate.split(\"-\")[1] >= 9) {\n        endDate = this.$moment(this.renewalDate).add(1, 'years').endOf('year').format(\"YYYY-MM-DD\")\n      } else {\n        endDate = this.$moment(this.renewalDate).endOf('year').format(\"YYYY-MM-DD\")\n      }\n      let license = {\n        resourceType: \"Basic\",\n        meta: {\n          profile: [\"http://ihris.org/fhir/StructureDefinition/nmcb-license-profile\"]\n        },\n        extension: [{\n          url: \"http://ihris.org/fhir/StructureDefinition/start-date\",\n          valueDate: this.renewalDate\n        }, {\n          url: \"http://ihris.org/fhir/StructureDefinition/end-date\",\n          valueDate: endDate\n        }, {\n          url: \"http://ihris.org/fhir/StructureDefinition/license-number\",\n          valueString: licensenumber\n        }, {\n          url: \"http://ihris.org/fhir/StructureDefinition/nmcb-registration-reference\",\n          valueReference: {\n            reference: registration\n          }\n        }, {\n          url: \"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference\",\n          valueReference: {\n            reference: practitioner\n          }\n        }, {\n          url: \"http://ihris.org/fhir/StructureDefinition/ihris-related-group\",\n          extension: [{\n            url: \"practitioner\",\n            valueString: practitioner\n          }]\n        }]\n      }\n      let opts = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/fhir+json\"\n        },\n        redirect: 'manual',\n        body: JSON.stringify(license)\n      }\n      fetch(\"/fhir/Basic\", opts).then((response) => {\n        this.overlay = false;\n        if(response.status === 201) {\n          this.getLatestLicense()\n          this.$store.commit(\"setMessage\", {\n            type: \"success\",\n            text: \"License Renewed\",\n          });\n        } else {\n          this.$store.commit(\"setMessage\", {\n            type: \"error\",\n            text: \"Failed to renew license.\"\n          });\n        }\n      }).catch(() => {\n        this.overlay = false;\n        this.$store.commit(\"setMessage\", {\n          type: \"error\",\n          text: \"Failed to renew license.\"\n        });\n      })\n    },\n    getLatestLicense() {\n      fetch(\"/fhir/Basic?_profile=http://ihris.org/fhir/StructureDefinition/nmcb-license-profile&_count=1&_sort=-_id&nmcbregistration=Basic/\" + this.queries.id).then((response) => {\n        response.json().then((license) => {\n          if(license.entry && license.entry.length > 0) {\n            this.license.resource = license.entry[0].resource\n            this.licenseCompKey = 'license' + ++this.licenseCompKey.split('license')[1]\n          }\n        })\n      })\n    },\n    getRegistration() {\n      fetch(\"/fhir/Basic/\" + this.queries.id).then(response => response.json().then((registration) => {\n        this.registration.resource = registration\n        this.registration.registrationStatus = registration.extension.find((ext) => {\n          return ext.url === 'http://ihris.org/fhir/StructureDefinition/nmcb-registration-status'\n        }).valueCoding\n        this.registration.statusCode = this.registration.registrationStatus.code\n        this.regCompKey = 'registration' + ++this.regCompKey.split('registration')[1]\n      }))\n    },\n    activateChangeStatus() {\n      if(this.LicenseChangeStatusCodes.length === 0) {\n        this.loadLicenseChangeStatusCodes()\n      }\n      this.changeLicenseStatusDialog = true\n    },\n    async loadRegStatusCodes() {\n      this.loading = true\n      this.regStatusCodes = await this.$fhirutils.expand(\"http://ihris.org/fhir/StructureDefinition/nmcb-registration-status-valueset\")\n      this.loading = false\n    }\n  },\n  created() {\n    this.getRegistration()\n    setTimeout(() => {\n      this.getLatestLicense()\n    }, 600);\n  },\n  components: {\n    \"bw-page-view\": () => import(\"@/site/view/bw-page-view\")\n  }\n}\n</script>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./nmcb-registration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./nmcb-registration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./nmcb-registration.vue?vue&type=template&id=50285ff6&\"\nimport script from \"./nmcb-registration.vue?vue&type=script&lang=js&\"\nexport * from \"./nmcb-registration.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDatePicker } from 'vuetify/lib/components/VDatePicker';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VContainer,VDatePicker,VDialog,VDivider,VIcon,VList,VListItem,VMenu,VNavigationDrawer,VOverlay,VProgressCircular,VSpacer,VTextField,VToolbar})\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","overlay","on","$event","_v","staticClass","staticStyle","$router","push","queries","practitioner","renewDialog","_e","print_certificate","model","value","callback","$$v","expression","scopedSlots","_u","key","fn","ref","_g","renewalDateFormatted","dateMenu","formatDate","renewalDate","renew","regCompKey","id","license","resource","licenseCompKey","staticRenderFns","props","data","loading","regStatusCodes","registration","statusCode","registrationStatus","computed","canRenewLicense","canPrintCertificate","methods","fetch","response","nm","name","fullname","link","catch","valueReference","reference","valueString","endDate","resourceType","meta","profile","extension","url","valueDate","method","headers","redirect","body","type","text","getLatestLicense","getRegistration","valueCoding","activateChangeStatus","created","setTimeout","components","component","VBtn"],"sourceRoot":""}