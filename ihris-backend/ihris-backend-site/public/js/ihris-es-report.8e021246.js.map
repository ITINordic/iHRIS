{"version":3,"file":"js/ihris-es-report.8e021246.js","mappings":"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","sources":["webpack://iHRIS-v5/../../../src/components/VCheckbox/VCheckbox.ts","webpack://iHRIS-v5/./src/components/ihris/ihris-es-report.vue?e61d","webpack://iHRIS-v5/src/components/ihris/ihris-es-report.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-es-report.vue?8bc8","webpack://iHRIS-v5/./src/components/ihris/ihris-es-report.vue"],"sourcesContent":["// Styles\nimport './VCheckbox.sass'\nimport '../../styles/components/_selection-controls.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VInput from '../VInput'\n\n// Mixins\nimport Selectable from '../../mixins/selectable'\n\n/* @vue/component */\nexport default Selectable.extend({\n  name: 'v-checkbox',\n\n  props: {\n    indeterminate: Boolean,\n    indeterminateIcon: {\n      type: String,\n      default: '$checkboxIndeterminate',\n    },\n    offIcon: {\n      type: String,\n      default: '$checkboxOff',\n    },\n    onIcon: {\n      type: String,\n      default: '$checkboxOn',\n    },\n  },\n\n  data () {\n    return {\n      inputIndeterminate: this.indeterminate,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-input--selection-controls': true,\n        'v-input--checkbox': true,\n        'v-input--indeterminate': this.inputIndeterminate,\n      }\n    },\n    computedIcon (): string {\n      if (this.inputIndeterminate) {\n        return this.indeterminateIcon\n      } else if (this.isActive) {\n        return this.onIcon\n      } else {\n        return this.offIcon\n      }\n    },\n    // Do not return undefined if disabled,\n    // according to spec, should still show\n    // a color when disabled and active\n    validationState (): string | undefined {\n      if (this.isDisabled && !this.inputIndeterminate) return undefined\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor !== null) return this.computedColor\n      return undefined\n    },\n  },\n\n  watch: {\n    indeterminate (val) {\n      // https://github.com/vuetifyjs/vuetify/issues/8270\n      this.$nextTick(() => (this.inputIndeterminate = val))\n    },\n    inputIndeterminate (val) {\n      this.$emit('update:indeterminate', val)\n    },\n    isActive () {\n      if (!this.indeterminate) return\n      this.inputIndeterminate = false\n    },\n  },\n\n  methods: {\n    genCheckbox () {\n      const { title, ...checkboxAttrs } = this.attrs$\n      return this.$createElement('div', {\n        staticClass: 'v-input--selection-controls__input',\n      }, [\n        this.$createElement(VIcon, this.setTextColor(this.validationState, {\n          props: {\n            dense: this.dense,\n            dark: this.dark,\n            light: this.light,\n          },\n        }), this.computedIcon),\n        this.genInput('checkbox', {\n          ...checkboxAttrs,\n          'aria-checked': this.inputIndeterminate\n            ? 'mixed'\n            : this.isActive.toString(),\n        }),\n        this.genRipple(this.setTextColor(this.rippleState)),\n      ])\n    },\n    genDefaultSlot () {\n      return [\n        this.genCheckbox(),\n        this.genLabel(),\n      ]\n    },\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"py-5\"},[_c('v-card',{staticClass:\"py-4 px-2\"},[(!_vm.hideLabel)?_c('v-card-title',{staticClass:\"ma-4\"},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.label)+\" \"),_c('v-spacer'),_c('v-row',{staticClass:\"pr-4\",attrs:{\"align\":\"center\",\"justify\":\"end\"}},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"color\":\"primary\"},on:{\"click\":function () {\n                _vm.dialog = true;\n              }}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-chart-box-plus-outline\")]),_vm._v(\" Customize Report \"+_vm._s(_vm.$t(\"App.hardcoded-texts.Customize Report\"))+\" \")],1),_c('v-btn',{attrs:{\"color\":\"info\"},on:{\"click\":function($event){return _vm.reportExport('csv')}}},[(_vm.downloading)?_c('v-progress-circular',{attrs:{\"color\":\"amber\",\"indeterminate\":\"\"}}):_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-microsoft-excel\")]),_vm._v(\" \"+_vm._s(_vm.$t(\"App.hardcoded-texts.Export\"))+\" \")],1)],1)],1)],1):_vm._e(),_c('v-divider',{staticClass:\"my-2\"}),(!_vm.hideLabel)?_c('v-card-title',[_vm._t(\"default\")],2):_vm._e(),(_vm.error_message)?_c('v-card-subtitle',{staticClass:\"white--text error\"},[_vm._v(_vm._s(_vm.error_message)+\" \")]):_vm._e(),_c('v-data-table',{staticClass:\"elevation-1 mt-3\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"footer-props\":{ 'items-per-page-options': _vm.itemsPerPage },\"headers\":_vm.headers,\"items\":_vm.results,\"loading\":_vm.loading,\"options\":_vm.options,\"server-items-length\":_vm.total,\"show-select\":_vm.reportData.displayCheckbox && !_vm.hideCheckboxes,\"item-key\":\"id\"},on:{\"update:options\":function($event){_vm.options=$event}},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}})],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"max-width\":\"80%\",\"persistent\":\"\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',{staticClass:\"px-6 py-4\"},[_c('v-card-title',{staticClass:\"justify-center\"},[_c('span',{staticClass:\"text-h6\"},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"color\":\"primary\",\"large\":\"\"}},[_vm._v(\"mdi-table-check\")]),_vm._v(_vm._s(_vm.$t(\"App.hardcoded-texts.selectFeild\")))],1)]),_c('v-card-text',[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',_vm._l((_vm.allHeaders),function(item){return _c('v-col',{key:item.value,attrs:{\"cols\":\"12\",\"md\":\"4\",\"sm\":\"4\"}},[_c('v-checkbox',{attrs:{\"label\":item.text,\"value\":item.value,\"color\":\"primary\",\"hide-details\":\"\"},model:{value:(_vm.selectedColumns),callback:function ($$v) {_vm.selectedColumns=$$v},expression:\"selectedColumns\"}})],1)}),1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"warning\"},on:{\"click\":function () {\n                _vm.dialog = false;\n              }}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-close-box-multiple\")]),_vm._v(\" \"+_vm._s(_vm.$t(\"App.hardcoded-texts.Close\"))+\" \")],1),_c('v-btn',{attrs:{\"color\":\"warning\"},on:{\"click\":_vm.reset}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-close-box-multiple\")]),_vm._v(\" \"+_vm._s(_vm.$t(\"App.hardcoded-texts.Reset\"))+\" \")],1),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.onFilter}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-content-save-check-outline\")]),_vm._v(\" \"+_vm._s(_vm.$t(\"App.hardcoded-texts.Apply\"))+\" \")],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"py-5\">\n    <v-card class=\"py-4 px-2\">\n      <v-card-title v-if=\"!hideLabel\" class=\"ma-4\">\n        <v-layout row wrap>\n          {{ label }}\n          <v-spacer></v-spacer>\n          <v-row align=\"center\" class=\"pr-4\" justify=\"end\">\n            <v-btn\n              class=\"mr-2\"\n              color=\"primary\"\n              @click=\"\n                () => {\n                  dialog = true;\n                }\n              \"\n            >\n              <v-icon left>mdi-chart-box-plus-outline</v-icon>\n              Customize Report\n              {{ $t(\"App.hardcoded-texts.Customize Report\") }}\n            </v-btn>\n            <v-btn color=\"info\" @click=\"reportExport('csv')\">\n              <v-progress-circular\n                v-if=\"downloading\"\n                color=\"amber\"\n                indeterminate\n              ></v-progress-circular>\n              <v-icon v-else left>mdi-microsoft-excel</v-icon>\n              {{ $t(\"App.hardcoded-texts.Export\") }}\n            </v-btn>\n          </v-row>\n        </v-layout>\n      </v-card-title>\n      <v-divider class=\"my-2\"></v-divider>\n      <v-card-title v-if=\"!hideLabel\" >\n        <slot></slot>\n      </v-card-title>\n      <v-card-subtitle v-if=\"error_message\" class=\"white--text error\"\n      >{{ error_message }}\n      </v-card-subtitle>\n      <v-data-table\n        v-model=\"selected\"\n        :footer-props=\"{ 'items-per-page-options': itemsPerPage }\"\n        :headers=\"headers\"\n        :items=\"results\"\n        :loading=\"loading\"\n        :options.sync=\"options\"\n        :server-items-length=\"total\"\n        :show-select=\"reportData.displayCheckbox && !hideCheckboxes\"\n        class=\"elevation-1 mt-3\"\n        item-key=\"id\"\n        style=\"cursor: pointer\"\n      ></v-data-table>\n    </v-card>\n    <v-row justify=\"center\">\n      <v-dialog v-model=\"dialog\" max-width=\"80%\" persistent>\n        <v-card class=\"px-6 py-4\">\n          <v-card-title class=\"justify-center\">\n            <span class=\"text-h6\"\n            ><v-icon class=\"mr-2\" color=\"primary\" large\n            >mdi-table-check</v-icon\n            >{{ $t(\"App.hardcoded-texts.selectFeild\") }}</span\n            >\n          </v-card-title>\n          <v-card-text>\n            <v-container fluid>\n              <v-row>\n                <v-col\n                  v-for=\"item in allHeaders\"\n                  :key=\"item.value\"\n                  cols=\"12\"\n                  md=\"4\"\n                  sm=\"4\"\n                >\n                  <!-- {{item}} -->\n                  <v-checkbox\n                    v-model=\"selectedColumns\"\n                    :label=\"item.text\"\n                    :value=\"item.value\"\n                    color=\"primary\"\n                    hide-details\n                  ></v-checkbox>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"warning\"\n              @click=\"\n                () => {\n                  dialog = false;\n                }\n              \"\n            >\n              <v-icon left>mdi-close-box-multiple</v-icon>\n              {{ $t(\"App.hardcoded-texts.Close\") }}\n            </v-btn>\n            <v-btn color=\"warning\" @click=\"reset\">\n              <v-icon left>mdi-close-box-multiple</v-icon>\n              {{ $t(\"App.hardcoded-texts.Reset\") }}\n            </v-btn>\n            <v-btn color=\"primary\" @click=\"onFilter\">\n              <v-icon left>mdi-content-save-check-outline</v-icon>\n              {{ $t(\"App.hardcoded-texts.Apply\") }}\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { eventBus } from \"@/main\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"ihris-report\",\n  props: [\n    \"reportData\",\n    \"label\",\n    \"terms\",\n    \"termsConditions\",\n    \"dataURL\",\n    \"page\",\n    \"hideCheckboxes\",\n    \"hideLabel\",\n  ],\n  data: function () {\n    return {\n      debug: \"\",\n      downloading: false,\n      headers: [],\n      allHeaders: [],\n      results: [],\n      selectedColumns: [],\n      options: { itemsPerPage: 10 },\n      loading: false,\n      total: 0,\n      prevPage: -1,\n      link: [],\n      selected: [],\n      error_message: null,\n      selectAll: false,\n      //custom report\n      dialog: false,\n    };\n  },\n  watch: {\n    selected() {\n      if (this.selected.length !== this.results.length && this.selectAll) {\n        this.selectAll = false;\n      }\n      eventBus.$emit(\n        \"ihris-report-selections\",\n        this.selected,\n        this.reportData,\n        this.terms,\n        this.termsConditions,\n        this.selectAll\n      );\n    },\n    terms: {\n      handler() {\n        this.selectAll = false;\n        this.getTotalRecords();\n        this.getData(true);\n        eventBus.$emit(\"changedTerms\", this.terms);\n      },\n      deep: true,\n    },\n    termsConditions: {\n      handler() {\n        if (Object.keys(this.terms).length > 0) {\n          this.selectAll = false;\n          this.getTotalRecords();\n          this.getData(true);\n        }\n      },\n      deep: true,\n    },\n    options: {\n      handler() {\n        this.getTotalRecords();\n        this.getData();\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    itemsPerPage() {\n      let items = [5, 10, 20, 50];\n      return items;\n    },\n  },\n  created: function () {\n    //sorting columns\n    if(this.reportData && this.reportData.fieldsDetails) {\n      this.reportData.fieldsDetails.sort((a, b) => {\n        if((a[2] != null && b[2] == null) || (a[2] != null && b[2] != null && a[2] < b[2])) {\n          return -1\n        } else if((b[2] != null && a[2] == null) || (a[2] != null && b[2] != null && a[2] > b[2])) {\n          return 1\n        } else {\n          return -1\n        }\n      })\n    }\n    for (let field of this.reportData.fieldsDetails) {\n      this.headers.push({ text: field[0], value: field[1] });\n      this.allHeaders.push({ text: field[0], value: field[1] });\n    }\n    eventBus.$on(\"reload-report\", () => {\n      this.getTotalRecords();\n      this.getData();\n    });\n    eventBus.$on(\"mhero-select-all\", () => {\n      this.selected = [];\n      this.selected = this.results;\n      this.selectAll = true;\n    });\n  },\n  methods: {\n    reset() {\n      this.headers = this.allHeaders;\n      this.dialog = false;\n    },\n    onFilter() {\n      this.dialog = false;\n      this.headers = this.allHeaders.filter((item) => {\n        if (this.selectedColumns.includes(item.value)) {\n          return item;\n        }\n      });\n    },\n    clickIt: function (record) {\n      this.$router.push({\n        name: \"resource_view\",\n        params: { page: this.page, id: record.id },\n      });\n    },\n    buildTerms() {\n      let body = {};\n      body = {\n        query: {\n          bool: {\n            must: [],\n            must_not: [],\n          },\n        },\n      };\n      let sTermDet;\n      if (Object.keys(this.terms).length > 0) {\n        for (let sTerm in this.terms) {\n          if (!this.terms[sTerm] || this.terms[sTerm].length === 0) {\n            continue;\n          }\n          sTermDet = this.reportData.filters.find((filter) => {\n            return filter.field === sTerm;\n          });\n\n          if (!sTermDet.isDropDown) {\n            this.terms[sTerm] = this.terms[sTerm].replace(/\\s+/g, \" \").trim();\n          }\n\n          let esFieldName;\n          if (sTermDet.isDropDown) {\n            esFieldName = sTerm + \".keyword\";\n          } else {\n            esFieldName = sTerm;\n          }\n          if (Array.isArray(this.terms[sTerm])) {\n            let terms = {\n              terms: {},\n            };\n            terms.terms[esFieldName] = [];\n            for (let value of this.terms[sTerm]) {\n              terms.terms[esFieldName].push(value);\n            }\n            if (this.termsConditions[sTerm] === \"exclude\") {\n              body.query.bool.must_not.push(terms);\n            } else {\n              body.query.bool.must.push(terms);\n            }\n          } else {\n            if (!sTermDet.isDropDown) {\n              let termArr = this.terms[sTerm].split(\" \");\n              for (let tm of termArr) {\n                let query = {};\n                if (\n                  this.reportData.mappings.mappings.properties[esFieldName] &&\n                  this.reportData.mappings.mappings.properties[esFieldName]\n                    .type === \"text\"\n                ) {\n                  query.wildcard = {};\n                  query.wildcard[esFieldName] = tm + \"*\";\n                } else {\n                  query.term = {};\n                  query.term[esFieldName] = tm;\n                }\n                if (this.termsConditions[sTerm] === \"exclude\") {\n                  body.query.bool.must_not.push(query);\n                } else {\n                  body.query.bool.must.push(query);\n                }\n              }\n            } else {\n              let terms = {\n                terms: {},\n              };\n              terms.terms[esFieldName] = [this.terms[sTerm]];\n              if (this.termsConditions[sTerm] === \"exclude\") {\n                body.query.bool.must_not.push(terms);\n              } else {\n                body.query.bool.must.push(terms);\n              }\n            }\n          }\n        }\n      }\n\n      if (sTermDet && sTermDet.field) {\n        if (sTermDet.field == \"startDate\" || sTermDet.field == \"endDate\") {\n          let defEndDate = new Date().toISOString().slice(0, 10);\n          let defStartDate;\n          if (sTermDet.field == \"startDate\") {\n            defStartDate = this.terms.startDate;\n          }\n          if (sTermDet.field == \"endDate\") {\n            defEndDate = this.terms.endDate;\n          }\n\n          body = {\n            query: {\n              bool: {\n                filter: [\n                  {\n                    range: {\n                      startDate: {\n                        gte: defStartDate,\n                      },\n                    },\n                  },\n                  {\n                    range: {\n                      endDate: {\n                        lte: defEndDate,\n                      },\n                    },\n                  },\n                ],\n              },\n            },\n          };\n        }\n      }\n\n      eventBus.$emit(\"builtESTerms\", body);\n      return body;\n    },\n    getTotalRecords() {\n      let url = `/es/${this.reportData.indexName}/_count`;\n\n      let body = this.buildTerms();\n\n      body.reportOptions = {\n        locationBasedConstraint: this.reportData.locationBasedConstraint,\n      };\n\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(body),\n      }).then((response) => {\n        response.json().then((data) => {\n          this.total = data.count;\n          eventBus.$emit(\"report-total-records\", this.total);\n        });\n      });\n    },\n    getData(restart) {\n      this.loading = true;\n      this.error_message = null;\n      let url = \"\";\n      if (restart) this.options.page = 1;\n      let count = this.options.itemsPerPage || 10;\n      if (count === -1) {\n        count = this.total;\n      }\n      let from =\n        this.options.page * this.options.itemsPerPage -\n        this.options.itemsPerPage;\n      url = `/es/${this.reportData.indexName}/_search?size=${count}&from=${from}`;\n      this.prevPage = this.options.page;\n      let body = this.buildTerms();\n\n      body.reportOptions = {\n        locationBasedConstraint: true,\n      };\n      let sorting = [];\n      for (let index in this.options.sortBy) {\n        let sortCol = this.options.sortBy[index];\n        let sort = {};\n        let sortColESName;\n        if (\n          this.reportData.mappings.mappings.properties[sortCol] &&\n          this.reportData.mappings.mappings.properties[sortCol].type === \"text\"\n        ) {\n          sortColESName = sortCol + \".keyword\";\n        } else {\n          sortColESName = sortCol;\n        }\n        if (this.options.sortDesc[index]) {\n          sort[sortColESName] = \"desc\";\n        } else {\n          sort[sortColESName] = \"asc\";\n        }\n        sorting.push(sort);\n      }\n      body.sort = sorting;\n\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(body),\n      })\n        .then((response) => {\n          response\n            .json()\n            .then((data) => {\n              this.results = [];\n              if (data.hits.total.value > 0) {\n                this.link = data.link;\n                for (let hit of data.hits.hits) {\n                  let result = {};\n                  for (let field in hit[\"_source\"]) {\n                    result[field] = hit[\"_source\"][field];\n                  }\n                  result.id = hit[\"_id\"];\n                  this.results.push(result);\n                }\n              }\n              if (this.selectAll) {\n                this.selected = this.results;\n              }\n              //  else {\n              //   this.selected = []\n              // }\n              this.loading = false;\n            })\n            .catch((err) => {\n              this.loading = false;\n              this.error_message = \"Unable to load results.\";\n              console.log(err);\n            });\n        })\n        .catch((err) => {\n          this.loading = false;\n          this.error_message = \"Unable to load results.\";\n          console.log(err);\n        });\n    },\n    reportExport(format) {\n      this.downloading = true;\n      let url = `/es/export/${format}/${this.reportData.indexName}`;\n      let body = {\n        query: this.buildTerms(),\n        headers: this.headers,\n        label: this.label,\n        selected: this.selected,\n      };\n      axios({\n        url: url,\n        method: \"POST\",\n        responseType: \"blob\",\n        data: body,\n      }).then((response) => {\n        this.downloading = false;\n        let blob = new Blob([response.data], { type: \"text/csv\" });\n        let link = document.createElement(\"a\");\n        link.href = window.URL.createObjectURL(blob);\n        link.download = `${this.label}.${format}`;\n        link.click();\n      });\n    },\n  },\n};\n</script>\n<style>\ntbody tr:nth-of-type(even) {\n  background-color: #E0F2F1;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-es-report.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-es-report.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-es-report.vue?vue&type=template&id=2c0168d9&\"\nimport script from \"./ihris-es-report.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-es-report.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-es-report.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardSubtitle,VCardText,VCardTitle,VCheckbox,VCol,VContainer,VDataTable,VDialog,VDivider,VIcon,VLayout,VProgressCircular,VRow,VSpacer})\n"],"names":["Selectable","name","props","indeterminate","Boolean","indeterminateIcon","type","String","default","offIcon","onIcon","data","inputIndeterminate","this","computed","classes","VInput","computedIcon","isActive","validationState","isDisabled","hasError","shouldValidate","hasSuccess","hasColor","computedColor","watch","val","$nextTick","$emit","methods","genCheckbox","title","checkboxAttrs","attrs$","$createElement","staticClass","VIcon","setTextColor","dense","dark","light","genInput","toString","genRipple","rippleState","genDefaultSlot","genLabel","render","_vm","_h","_c","_self","hideLabel","_e","attrs","_v","_s","label","on","dialog","$t","$event","reportExport","_t","error_message","staticStyle","itemsPerPage","headers","results","loading","options","total","reportData","displayCheckbox","hideCheckboxes","model","value","callback","$$v","selected","expression","_l","item","key","text","selectedColumns","reset","onFilter","staticRenderFns","debug","downloading","allHeaders","prevPage","link","selectAll","eventBus","terms","handler","deep","termsConditions","created","clickIt","params","page","id","buildTerms","body","query","bool","must","must_not","sTermDet","esFieldName","defStartDate","defEndDate","filter","range","startDate","gte","endDate","lte","getTotalRecords","locationBasedConstraint","fetch","method","then","response","getData","count","url","sortColESName","sort","sorting","json","result","catch","err","console","axios","responseType","component","VBtn"],"sourceRoot":""}